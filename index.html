<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Blog</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-panel {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .admin-panel h2 {
            margin-bottom: 10px;
        }
        .admin-panel input,
        .admin-panel textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .admin-panel button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .admin-panel button:hover {
            background-color: #45a049;
        }
        .edit-panel {
            display: none; 
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="index.html" class="brand">My Blog</a>
            <div class="search-bar">
                <input type="text" placeholder="Search..." oninput="searchPosts(this.value)">
            </div>
        </nav>
    </header>

    <main class="post-list" id="post-list">
        <article class="post-preview">
            <img src="jesus.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Jesus&image=jesus.jpg">Jesus</a></h2>
            <p>Jesus also referred to as Jesus Christ, Jesus of Nazareth, and many other names and titles, was a 1st-century Jewish preacher and religious leader. He is the central figure of Christianity, the world's largest religion. Click to read more...</p>
            <p><span style="color: rgb(7, 105, 31);">Click on "Title to comment on Post"</span></p>
            <a href="https://en.wikipedia.org/wiki/Jesus"><button type="read more">Read More</button></a>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
        <article class="post-preview">
            <img src="christmas.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Christmas&image=christmas.jpg">Christmas</a></h2>
            <p>Christmas is an annual festival commemorating the birth of Jesus Christ, observed primarily on December 25[a] as a religious and cultural celebration among billions of people around the world. Click to read more...</p>
            <p><span style="color: blue;">Click on "Title to comment on Post"</span></p>
            <a href="https://en.wikipedia.org/wiki/Christmas"><button type="read more">Read More</button></a>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
        <article class="post-preview">
            <img src="apostles.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Apostles&image=apostles.jpg">Apostles</a></h2>
            <p>An apostle (/əˈpɒsəl/), in its literal sense, is an emissary. The word is derived from Ancient Greek ἀπόστολος (apóstolos), literally "one who is sent off", itself derived from the verb ἀποστέλλειν (apostéllein), "to send off". Click to read more...</p>
            <p><span style="color: blue;">Click on "Title to comment on Post"</span></p>
            <a href="https://en.wikipedia.org/wiki/Apostle"><button type="read more">Read More</button></a>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
        <article class="post-preview">
            <img src="gospel.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Gospel&image=gospel.jpg">Gospel</a></h2>
            <p>Gospel originally meant the Christian message ("the gospel"), but in the 2nd century it came to be used also for the books in which the message was reported.In this sense a gospel can be defined as a loose-knit, episodic narrative of the words and deeds of Jesus, culminating in his trial and death and concluding with various reports of his post-resurrection appearances. Click to read more...</p>
            <p><span style="color: blue;">Click on "Title to comment on Post"</span></p>
            <a href="https://en.wikipedia.org/wiki/Gospel"><button type="read more">Read More</button></a>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
        <article class="post-preview">
            <img src="crucifixion.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Crucifixion_of_Jesus&image=crucifixion.jpg">Crucifixion_of_Jesus</a></h2>
            <p>The crucifixion of Jesus was the death of Jesus by being nailed to a cross.[note 1] It occurred in 1st-century Judaea, most likely in AD 30 or AD 33. It is described in the four canonical gospels, referred to in the New Testament epistles, and later attested to by other ancient sources. Click to read more...</p>
            <a href="https://en.wikipedia.org/wiki/Crucifixion_of_Jesus"><button type="read more">Read More</button></a>
            <p><span style="color: blue;">Click on "Title to comment on Post"</span></p>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
        <article class="post-preview">
            <img src="resurrection.jpg" alt="Post Image" class="img">
            <h2><a href="post.html?title=Resurrection_of_Jesus&image=resurrection.jpg">Resurrection_of_Jesus</a></h2>
            <p>The resurrection of Jesus (Biblical Greek: ἀνάστασις τοῦ Ἰησοῦ, romanized: anástasis toú Iēsoú) is the Christian event that God raised Jesus from the dead on the third day[note 1] after his crucifixion, starting – or restoring[web 1][note 2] – his exalted life as Christ and Lord.[web 2] According to the New Testament writing, Jesus was firstborn from the dead, ushering in the Kingdom of God. Click to read more...</p>
            <p><span style="color: blue;">Click on "Title to comment on Post"</span></p>
            <a href="https://en.wikipedia.org/wiki/Resurrection_of_Jesus"><button type="read more">Read More</button></a>
            <button onclick="confirmAction('edit', this)">Edit</button>
            <button onclick="confirmAction('delete', this)">Delete</button>
        </article>
    </main>
    <div class="admin-panel">
        <h2>Admin Panel to Add, Edit, and Delete Blog Posts</h2>
        <input type="text" id="post-title-input" placeholder="Post Title" required>
        <input type="file" id="post-image-input" accept=".jpg, .jpeg, .png, .gif" required>
        <textarea id="post-excerpt-input" placeholder="Post Excerpt" rows="4"></textarea>
        <button onclick="confirmAction('add')">Add Post</button>
    </div>
    <div class="edit-panel" id="edit-panel">
        <h2>Edit Post</h2>
        <input type="text" id="edit-post-title-input" placeholder="Post Title" required>
        <input type="file" id="edit-post-image-input" accept=".jpg, .jpeg, .png, .gif">
        <textarea id="edit-post-excerpt-input" placeholder="Post Excerpt" rows="4"></textarea>
        <button onclick="updatePost()">Update Post</button>
        <button onclick="cancelEdit()">Cancel</button>
    </div>

    <script>
        const adminPassword = "admin1234";
        let currentEditPost = null;

        // Load posts from local storage on page load
        document.addEventListener('DOMContentLoaded', loadPosts);

        function confirmAction(action, button) {
            const userPassword = prompt("Please enter the admin password:");

            if (userPassword === adminPassword) {
                if (action === 'edit') {
                    editPost(button);
                } else if (action === 'delete') {
                    deletePost(button);
                } else if (action === 'add') {
                    addPost();
                }
            } else {
                alert("Access denied: Incorrect password.");
            }
        }

        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            posts.forEach(post => {
                displayPost(post.title, post.image, post.excerpt);
            });
        }

        function displayPost(title, imageSrc, excerpt) {
            const postList = document.getElementById('post-list');

            // Create a new article element for the post
            const newPost = document.createElement('article');
            newPost.className = 'post-preview';
            newPost.innerHTML = `
                <img src="${imageSrc}" alt="Post Image" class="img">
                <h2><a href="post.html?title=${encodeURIComponent(title)}&image=${imageSrc}">${title}</a></h2>
                <p>${excerpt}</p>
                <a href="post.html?title=${encodeURIComponent(title)}&image=${imageSrc}"><button type="read more">Read More</button></a>
                <button onclick="confirmAction('edit', this)">Edit</button>
                <button onclick="confirmAction('delete', this)">Delete</button>
            `;

            // Append the new post to the post list
            postList.appendChild(newPost);
        }

        function addPost() {
            const title = document.getElementById('post-title-input').value;
            const imageInput = document.getElementById('post-image-input');
            const excerpt = document.getElementById('post-excerpt-input').value;

            if (title && imageInput.files.length > 0 && excerpt) {
                const file = imageInput.files[0];
                const reader = new FileReader();

                reader.onload = function(e) {
                    const imgSrc = e.target.result; // Get the file's data URL

                    // Display the new post
                    displayPost(title, imgSrc, excerpt);

                    // Store post data in local storage
                    storePost(title, imgSrc, excerpt);
                };

                reader.readAsDataURL(file); // Read the file as a data URL

                // Reset the form inputs
                document.getElementById('post-title-input').value = '';
                document.getElementById('post-excerpt-input').value = '';
                imageInput.value = ''; // Reset file input
            } else {
                alert("Please fill in all fields.");
            }
        }

        function storePost(title, imageSrc, excerpt) {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            posts.push({ title, image: imageSrc, excerpt });
            localStorage.setItem('posts', JSON.stringify(posts));
            alert("Post added successfully!");
        }

        function editPost(button) {
            const post = button.parentElement;
            currentEditPost = post;

            const title = post.querySelector('h2 a').textContent;
            const excerpt = post.querySelector('p').textContent;
            const imgSrc = post.querySelector('img').src;

            // Populate edit form with existing post data
            document.getElementById('edit-post-title-input').value = title;
            document.getElementById('edit-post-excerpt-input').value = excerpt;
            document.getElementById('edit-post-image-input').value = ''; // Reset file input (upload new image if needed)

            // Show the edit panel
            document.getElementById('edit-panel').style.display = 'block';
        }

        function updatePost() {
            const title = document.getElementById('edit-post-title-input').value;
            const excerpt = document.getElementById('edit-post-excerpt-input').value;
            const imageInput = document.getElementById('edit-post-image-input');

            if (title && excerpt) {
                const imgSrc = currentEditPost.querySelector('img').src; // Keep current image if no new image is uploaded

                if (imageInput.files.length > 0) {
                    const file = imageInput.files[0];
                    const reader = new FileReader();

                    reader.onload = function(e) {
                        const newImgSrc = e.target.result; // Get the new image's data URL

                        // Update post details
                        updatePostDetails(title, newImgSrc, excerpt);

                        // Update local storage
                        updateLocalStorage(title, newImgSrc, excerpt);
                    };

                    reader.readAsDataURL(file); // Read the file as a data URL
                } else {
                    // Update text content only
                    updatePostDetails(title, imgSrc, excerpt);
                    updateLocalStorage(title, imgSrc, excerpt);
                }

                // Reset the edit panel and hide it
                cancelEdit();
            } else {
                alert("Please fill in all fields.");
            }
        }

        function updatePostDetails(title, imgSrc, excerpt) {
            currentEditPost.querySelector('h2 a').textContent = title;
            currentEditPost.querySelector('h2 a').href = `post.html?title=${encodeURIComponent(title)}&image=${imgSrc}`;
            currentEditPost.querySelector('img').src = imgSrc;
            currentEditPost.querySelector('p').textContent = excerpt;

            alert("Post updated successfully!");
        }

        function updateLocalStorage(title, imgSrc, excerpt) {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            const index = posts.findIndex(post => post.title === currentEditPost.querySelector('h2 a').textContent);
            if (index !== -1) {
                posts[index] = { title, image: imgSrc, excerpt };
                localStorage.setItem('posts', JSON.stringify(posts));
            }
        }

        function deletePost(button) {
            const post = button.parentElement;
            const title = post.querySelector('h2 a').textContent;

            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            const updatedPosts = posts.filter(post => post.title !== title);

            localStorage.setItem('posts', JSON.stringify(updatedPosts));
            post.remove();
            alert("Post deleted successfully!");
        }

        function cancelEdit() {
            document.getElementById('edit-panel').style.display = 'none'; // Hide edit panel
            currentEditPost = null; // Clear current edit reference
        }

        function searchPosts(query) {
            const posts = document.querySelectorAll('.post-preview');
            posts.forEach(post => {
                const title = post.querySelector('h2 a').textContent.toLowerCase();
                post.style.display = title.includes(query.toLowerCase()) ? '' : 'none';
            });
        }
    </script>
</body>
</html>
